var D=Object.defineProperty;var O=(e,t,s)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var r=(e,t,s)=>(O(e,typeof t!="symbol"?t+"":t,s),s);import{C as j,S as E,O as F,G as V,T,a as G,A as H,P as I,b as _,R as Y,M as B,c as N,d as v,e as U,f as X,g as q,h as K,i as $,W as J,j as Q,V as u,k as Z}from"./vendor.c1fea427.js";const ee=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))b(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const w of a.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&b(w)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function b(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}};ee();class M{constructor(t){r(this,"model");this.model=t}update(t){}}class L extends M{constructor(t,s){super(t);r(this,"scene");this.scene=new j,s.stage.addChild(this.scene)}update(){}}const C=window.innerWidth/window.innerHeight;class z extends M{constructor(t,s){super(t);r(this,"scene");r(this,"camera");r(this,"renderer");this.scene=new E,this.renderer=s,this.camera=new F(-this.model.d*C,this.model.d*C,this.model.d,-this.model.d,1,2e3),this.camera.position.set(10,10,10),this.scene.add(this.camera)}update(t){}onWindowResize(){this.camera.updateProjectionMatrix(),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setSize(window.innerWidth,window.innerHeight)}}class te extends z{constructor(t,s){super(t,s);r(this,"group");r(this,"exampleModel");r(this,"exampleTexture");r(this,"lightAmbient");r(this,"lightPoint");this.exampleModel=new V,this.exampleTexture=new T,this.group=new V,this.scene.add(this.group),this.scene.background=new G(14603982),this.camera.lookAt(this.scene.position),this.lightAmbient=new H(15263976),this.lightAmbient.intensity=.85,this.scene.add(this.lightAmbient),this.lightPoint=new I(16777215),this.lightPoint.position.set(4,3,1),this.lightPoint.castShadow=!0,this.lightPoint.intensity=.4,this.scene.add(this.lightPoint),new _().setPath("../resources/textures/").load("uv_grid_opengl.jpg",n=>{n.wrapS=n.wrapT=Y,n.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),this.exampleTexture=n,new B({map:n}),new N().setPath("../resources/models/").load("room.gltf",w=>{this.exampleModel=w.scene,this.exampleModel.position.set(0,-.5,0),this.exampleModel.scale.set(1,1,1);const S=new v({color:11262904});new v({color:11262904}),this.exampleModel.traverse(P=>{P.type=="mesh"&&(P.material=S)}),this.group.add(this.exampleModel)})})}update(t){this.group.scale.set(this.model.zoom,this.model.zoom,this.model.zoom)}}class ie extends L{constructor(t,s){super(t,s);r(this,"graphics");this.graphics=new U,this.graphics.beginFill(13452181),this.graphics.drawCircle(100,100,50),this.scene.addChild(this.graphics)}update(){}}let i={mode:0,color:16777215,d:2,zoom:1,activeView:1,pointerPosition:new u(0,0)},m=new X,y=new u,x=new u,o,l,A=new Z,W,g,k,d=[],h,c=new q;function ne(){re(),oe(),se(),we()}function oe(){W=new K,document.body.appendChild(W.dom)}function se(){h=new $,f()}function f(){switch(h.__folders.group&&h.removeFolder(h.__folders.group),i.activeView){case 0:const e=h.addFolder("group");e.open(),e.add(i,"mode",{build:0,color:1}).onChange(f),e.add(i,"zoom",.5,3,.5),i.mode==1&&e.addColor(i,"color").onChange(ae);break}}function ae(){const e=new v({color:i.color});o.material=e}function re(){l=new J,l.shadowMap.enabled=!0,l.shadowMap.type=Q,l.setPixelRatio(window.devicePixelRatio),l.setSize(window.innerWidth,window.innerHeight),c.renderer.view.style.position="absolute",c.renderer.view.style.display="none",c.renderer.backgroundColor=15335362,c.renderer.resize(window.innerWidth,window.innerHeight),document.body.appendChild(l.domElement),document.body.appendChild(c.view),g=new te(i,l),d.push(g),k=new ie(i,c),d.push(k),i.pointerPosition=new u(0,0),R()}let p;function de(){if(o!=null&&(p=o.userData.name,p!="planks"&&p!="walls"&&p!="windows"&&p!="floor")){m.setFromCamera(x,d[i.activeView].camera);const e=m.intersectObject(d[i.activeView].scene);if(e.length>0)for(let t of e)o.position.x=t.point.x,o.position.z=t.point.z}}function le(){o!=null&&o.userData.name!="planks"&&o.userData.name!="walls"&&o.userData.name!="windows"&&o.userData.name!="floor"&&o.rotateY(-Math.PI/2)}function ce(){o!=null&&o.rotateY(Math.PI/2)}function we(){window.addEventListener("resize",he,!1),window.addEventListener("pointermove",pe),window.addEventListener("click",e=>{if(o){i.mode==0&&(o=null,console.log("dropped draggable"+o.userData.name));return}y.x=e.clientX/window.innerWidth*2-1,y.y=-(e.clientY/window.innerHeight)*2+1,m.setFromCamera(y,d[i.activeView].camera);const t=m.intersectObject(d[i.activeView].scene);t.length>0&&(o=t[0].object,console.log("found draggale "+o.userData.name))}),window.addEventListener("mousemove",e=>{x.x=e.clientX/window.innerWidth*2-1,x.y=-(e.clientY/window.innerHeight)*2+1}),window.addEventListener("keydown",e=>{const{key:t}=e;switch(t){case",":i.mode==0&&le();break;case".":i.mode==0&&ce();break;case"ArrowRight":i.activeView=(i.activeView+1)%d.length,f();break;case"ArrowLeft":i.activeView=i.activeView-1,i.activeView<0&&(i.activeView=d.length-1),f();break;case" ":o=null,console.log("dropped draggable"+o.userData.name);break}})}function he(){g.onWindowResize()}function pe(e){i.pointerPosition.x=e.clientX/window.innerWidth*2-1,i.pointerPosition.y=-(e.clientY/window.innerHeight)*2+1}function R(){switch(requestAnimationFrame(()=>{R(),i.mode==0&&de()}),A.getDelta(),i.activeView){case 0:g.update(A);break;case 1:k.update();break}d[i.activeView]instanceof z&&(l.domElement.style.display="block",c.renderer.view.style.display="none",l.render(d[i.activeView].scene,d[i.activeView].camera)),d[i.activeView]instanceof L&&(l.domElement.style.display="none",c.renderer.view.style.display="block")}ne();
